<html>
    
<head>
    <meta charset="utf-8">
    <title>Data Visualization</title>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
    
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    
    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    
    
    
  </head>
    
  <body class="container-fluid">
    <div class="container">
    <strong style="font-size: 2em">Threat Analysis</strong>
    <hr />
    <form method="POST">
        {% csrf_token %}
        {{form.as_p}}
       <!-- <input name="modify" value='true' type="hidden" />
            <input name="param1" value={{param1}} type="hidden" />
            <input name="param2" value={{param2}} type="hidden" />
            <input name="param3" value={{param3}} type="hidden" />
            <input name="param4" value={{param4}} type="hidden" />
            <input name="param5" value={{param5}} type="hidden" />
            <input name="param6" value={{param6}} type="hidden" />
            <input name="param7" value={{param7}} type="hidden" />
            <input name="param8" value={{param8}} type="hidden" />
            <input name="param9" value={{param9}} type="hidden" />
            <input name="param10" value={{param10}} type="hidden" />
            <input name="param11" value={{param11}} type="hidden" />-->
            <button class="btn btn-outline-info" style="background-color: #24659a; color:#fff" type="submit">Modify Data</button>
        </form>
        <hr/>
    <div class="row">
      <div class="col-md-6">
        <canvas id="myChartline"></canvas>
      </div>
      <div class="col-md-6">
        <canvas id="myChartBar"></canvas>
      </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
    
    <script>
        function visualize(data){
          drawLineGraph(data, 'myChartline');
          drawBarGraph(data, 'myChartBar');
          console.log("drawing");
        }
        labels = [
        'Establishing threat hunting goals',
        'Current coverage of threat hunting goals',
        'Hiring personnel dedicated to threat hunting',
        'Formulating a threat hunting hypothesis',
        'Acquiring specialized datasets and tools',
        'Threat hunting training',
        'SOC members who can develop needed cybersecurity scripts',
        'Utilizing full packet capture',
        'Utilizing windows registry keys',
        'Utilizing system memory',
        'Ability to scale threat hunting program'
            ]
        chartLabel = ""
        chartdata = ['{{param1}}','{{param2}}','{{param3}}','{{param4}}','{{param5}}','{{param6}}','{{param7}}','{{param8}}','{{param9}}','{{param10}}','{{param11}}']
        data ={
                     "labels":labels,
                     "chartLabel":chartLabel,
                     "chartdata":chartdata,
             }
        visualize(data);
    
    
      function drawLineGraph(data, id) {
        var labels = data.labels;
        var chartLabel = data.chartLabel;
        var chartdata = data.chartdata;
        var ctx = document.getElementById(id).getContext('2d');
        var chart = new Chart(ctx, {
          // The type of chart we want to create
          type: 'line',
    
          // The data for our dataset
          data: {
            labels: labels,
            datasets: [{
              label: chartLabel,
              backgroundColor: 'rgb(255, 100, 200)',
              borderColor: 'rgb(55, 99, 132)',
              data: chartdata,
            }]
          },
    
          // Configuration options go here
          options: {
            scales: {
              xAxes: [{
                display: true
              }],
              yAxes: [{
                ticks: {
                  beginAtZero: true
                }
              }]
            }
          }
    
        });
      }
    
      function drawBarGraph(data, id) {
        var labels = data.labels;
        var chartLabel = data.chartLabel;
        var chartdata = data.chartdata;
        var ctx = document.getElementById(id).getContext('2d');
        var myChart = new Chart(ctx, {
          type: 'bar',
          data: {
            labels: labels,
            datasets: [{
              label: chartLabel,
              data: chartdata,
              backgroundColor: [
                'rgba(255, 99, 132, 0.2)',
                'rgba(54, 162, 235, 0.2)',
                'rgba(255, 206, 86, 0.2)',
                'rgba(75, 192, 192, 0.2)',
                'rgba(153, 102, 255, 0.2)',
                'rgba(255, 159, 64, 0.2)'
              ],
              borderColor: [
                'rgba(255, 99, 132, 1)',
                'rgba(54, 162, 235, 1)',
                'rgba(255, 206, 86, 1)',
                'rgba(75, 192, 192, 1)',
                'rgba(153, 102, 255, 1)',
                'rgba(255, 159, 64, 1)'
              ],
              borderWidth: 1
            }]
          },
          options: {
            scales: {
              yAxes: [{
                ticks: {
                  beginAtZero: true
                }
              }]
            }
          }
        });
      }
    </script>
</body>
   
</html>